<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>图片展示</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #f8f4e9; 
            height: 100vh; 
            width: 100vw; 
            overflow: hidden; 
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: sans-serif;
        }
        
        /* 图片容器 - 只显示图片，无边框 */
        .img-view-box {
            position: relative;
            overflow: hidden;
            /* 图片加载完成前的最小尺寸 */
            width: 300px;
            height: 400px;
            max-width: 90vw;
            max-height: 90vh;
        }
        
        .img-container {
            display: flex;
            transition: transform 0.3s ease-out;
            height: 100%;
        }
        
        .img-item {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        .img-item img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            display: block;
        }
        
        /* 完全隐藏所有自定义控制元素（无新增提示框） */
        .page-title,
        .nav-buttons,
        .progress-bar,
        .slide-hint {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- 只保留纯图片容器，无任何自定义提示框 -->
    <div class="img-view-box" id="imgViewBox">
        <div class="img-container" id="imgContainer">
            <div class="img-item" id="firstImgItem">
                <img src="yinyan.png" alt="印章图片" id="img1">
            </div>
            <div class="img-item">
                <img src="zhishituozhan.png" alt="知识拓展图片" id="img2">
            </div>
        </div>
    </div>

    <!-- 图片放大遮罩层 -->
    <div class="img-mask" id="imgMask" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 999; justify-content: center; align-items: center;">
        <div class="big-img-container" id="bigImgContainer" style="display: flex; width: 100%; height: 100%; overflow: hidden;">
            <div class="big-img-item" style="min-width: 100%; height: 100%; display: flex; justify-content: center; align-items: center;">
                <img src="yinyan.png" alt="印章图片" style="max-width: 100%; max-height: 100%; object-fit: contain;">
            </div>
            <div class="big-img-item" style="min-width: 100%; height: 100%; display: flex; justify-content: center; align-items: center;">
                <img src="zhishituozhan.png" alt="知识拓展图片" style="max-width: 100%; max-height: 100%; object-fit: contain;">
            </div>
        </div>
    </div>

    <script>
        const container = document.getElementById('imgContainer');
        const imgViewBox = document.getElementById('imgViewBox');
        const imgMask = document.getElementById('imgMask');
        const bigContainer = document.getElementById('bigImgContainer');
        const img1 = document.getElementById('img1');
        const img2 = document.getElementById('img2');
        const firstImgItem = document.getElementById('firstImgItem'); // 第一张图容器
        
        let currentIndex = 0;
        const totalImgs = 2;
        const threshold = 50;
        let startX = 0;
        let isSwiping = false;
        let isBig = false;

        // 调整图片容器尺寸
        function adjustBoxSize() {
            const imgElement = currentIndex === 0 ? img1 : img2;
            
            if (!imgElement.complete || imgElement.naturalWidth === 0) {
                setTimeout(adjustBoxSize, 100);
                return;
            }
            
            const imgWidth = imgElement.naturalWidth;
            const imgHeight = imgElement.naturalHeight;
            const maxWidth = window.innerWidth * 0.9;
            const maxHeight = window.innerHeight * 0.9;
            
            let scale = 1;
            if (imgWidth > maxWidth) scale = Math.min(scale, maxWidth / imgWidth);
            if (imgHeight > maxHeight) scale = Math.min(scale, maxHeight / imgHeight);
            
            const finalWidth = imgWidth * scale;
            const finalHeight = imgHeight * scale;
            
            imgViewBox.style.width = `${finalWidth}px`;
            imgViewBox.style.height = `${finalHeight}px`;
            container.style.width = `${finalWidth * 2}px`;
        }

        // 图片加载
        img1.onload = adjustBoxSize;
        img2.onload = adjustBoxSize;
        
        if (img1.complete) adjustBoxSize();
        if (img2.complete) adjustBoxSize();

        window.addEventListener('resize', adjustBoxSize);

        // 核心修改：点击第一张图的“滑动继续”区域切换页面
        // 方案1：点击第一张图的右下角区域（模拟图片上“滑动继续→”的位置）
        firstImgItem.addEventListener('click', (e) => {
            if (isBig || currentIndex !== 0) return;
            
            // 获取图片容器的尺寸和位置
            const rect = firstImgItem.getBoundingClientRect();
            const clickX = e.clientX - rect.left;
            const clickY = e.clientY - rect.top;
            
            // 定义“滑动继续→”的点击区域（右下角：宽度70%~100%，高度70%~90%）
            // 可根据实际图片上的位置调整比例
            const isInHintArea = 
                clickX > rect.width * 0.7 && 
                clickX < rect.width * 1 && 
                clickY > rect.height * 0.7 && 
                clickY < rect.height * 0.9;
            
            // 如果点击的是提示区域，切换到第二张图
            if (isInHintArea) {
                currentIndex = 1;
                updatePage();
                return; // 阻止触发图片放大
            }
            
            // 非提示区域点击：正常放大图片
            openBigImg();
        });

        // 第二张图点击仅放大（保持原有逻辑）
        img2.addEventListener('click', () => {
            if (isBig) return;
            currentIndex = 1;
            openBigImg();
        });

        // 滑动切换
        imgViewBox.addEventListener('touchstart', handleStart);
        imgViewBox.addEventListener('mousedown', handleStart);
        document.addEventListener('touchend', handleEnd);
        document.addEventListener('mouseup', handleEnd);
        document.addEventListener('touchmove', handleMove);
        document.addEventListener('mousemove', handleMove);

        function handleStart(e) {
            if (isBig) return;
            startX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
            isSwiping = true;
            container.style.transition = 'none';
        }

        function handleMove(e) {
            if (!isSwiping || isBig) return;
            e.preventDefault();
            const moveX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
            const diffX = moveX - startX;
            
            const transform = getComputedStyle(container).transform;
            let translateX = 0;
            if (transform !== 'none') {
                const matrix = transform.match(/matrix.*\((.+)\)/)[1].split(', ');
                translateX = parseFloat(matrix[4]);
            }
            
            const maxTranslateX = 0;
            const minTranslateX = -(imgViewBox.offsetWidth);
            const newTranslateX = translateX + diffX;
            
            if (newTranslateX > maxTranslateX || newTranslateX < minTranslateX) return;
            
            container.style.transform = `translateX(${newTranslateX}px)`;
            startX = moveX;
        }

        function handleEnd(e) {
            if (!isSwiping || isBig) return;
            isSwiping = false;
            container.style.transition = 'transform 0.3s ease-out';
            
            const endX = e.type.includes('touch') ? e.changedTouches[0].clientX : e.clientX;
            const diffX = endX - startX;
            
            if (diffX < -threshold && currentIndex < totalImgs - 1) {
                currentIndex++;
            } else if (diffX > threshold && currentIndex > 0) {
                currentIndex--;
            }
            
            updatePage();
        }

        function updatePage() {
            container.style.transform = `translateX(-${currentIndex * imgViewBox.offsetWidth}px)`;
            setTimeout(adjustBoxSize, 10);
        }

        // 大图功能
        function openBigImg() {
            isBig = true;
            imgMask.style.display = 'flex';
            bigContainer.style.transform = `translateX(-${currentIndex * 100}%)`;
            document.body.style.overflow = 'hidden';
        }

        imgMask.addEventListener('click', () => {
            isBig = false;
            imgMask.style.display = 'none';
            document.body.style.overflow = '';
        });

        // 大图滑动
        imgMask.addEventListener('touchstart', (e) => {
            if (isBig) startX = e.touches[0].clientX;
        });

        imgMask.addEventListener('touchend', (e) => {
            if (!isBig) return;
            const endX = e.changedTouches[0].clientX;
            const diffX = endX - startX;
            
            if (diffX < -threshold && currentIndex < totalImgs - 1) {
                currentIndex++;
            } else if (diffX > threshold && currentIndex > 0) {
                currentIndex--;
            }
            
            bigContainer.style.transform = `translateX(-${currentIndex * 100}%)`;
            updatePage();
        });

        // 禁止双击缩放
        let lastTouchEnd = 0;
        document.addEventListener('touchend', e => {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) e.preventDefault();
            lastTouchEnd = now;
        }, false);

        // 初始调整
        setTimeout(adjustBoxSize, 100);
    </script>
</body>
</html>